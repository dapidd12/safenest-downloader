<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Safenest — Private file sharing</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <!-- FontAwesome v4 -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="stars"></div>
  <div class="twinkling"></div>
  
  <!-- Global Update Countdown Banner -->
  <div id="updateCountdownBanner" class="update-countdown-banner hide">
    <div class="update-banner-content">
      <div class="update-icon">
        <i class="fa fa-rocket"></i>
      </div>
      <div class="update-text">
        <strong>Update Berikutnya</strong>
        <span>Akan datang dalam: <span id="globalUpdateCountdown">--:--:--</span></span>
      </div>
      <button class="update-close-btn" onclick="hideUpdateBanner()">
        <i class="fa fa-times"></i>
      </button>
    </div>
  </div>

  <div class="app-shell">
    <!-- Simplified Header -->
    <header class="top-header glass">
      <div class="brand">
        <div class="brand-logo">
          <i class="fa fa-shield"></i>
        </div>
        <div class="brand-text">
          <div class="site-title">Safenest</div>
          <div class="site-sub">Setiap unggahan mendapat rumah. Setiap rahasia mendapat penjaga.</div>
        </div>
      </div>
      
      <!-- Update Countdown Badge -->
      <div id="headerUpdateBadge" class="update-badge hide">
        <i class="fa fa-clock-o"></i>
        <span id="headerUpdateCountdown">Update: --:--:--</span>
      </div>
    </header>

    <main class="main-area">
      <!-- DOWNLOAD -->
      <section id="page-download" class="page active">
        <div class="card glass-card">
          <div class="card-header">
            <h2 class="page-title"><i class="fa fa-download"></i> Download</h2>
            <div id="downloadUpdateBadge" class="page-update-badge hide">
              <i class="fa fa-rocket"></i>
              <span>Update dalam: <span id="downloadUpdateCountdown">--:--:--</span></span>
            </div>
          </div>
          
          <p class="muted">Masukkan username & password yang diberikan uploader.</p>

          <div class="grid-2">
            <input id="dlUser" placeholder="username (sn-xxxx)" />
            <input id="dlPass" placeholder="password" type="password" />
          </div>

          <div class="row" style="margin-top:12px">
            <button id="btnVerify" class="btn primary"><i class="fa fa-check-circle"></i> Verify & Show</button>
            <button id="btnClear" class="btn ghost"><i class="fa fa-refresh"></i> Bersihkan</button>
          </div>

          <div id="dlInfo" class="file-info hide">
            <h3 id="fileName">-</h3>
            <p class="muted small">Ukuran: <span id="fileSize">-</span> • Diunggah: <span id="fileTime">-</span></p>

            <div class="row" style="margin-top:12px">
              <button id="btnView" class="btn ghost"><i class="fa fa-eye"></i> Lihat File</button>
              <button id="btnDownload" class="btn primary"><i class="fa fa-download"></i> Download</button>
            </div>
          </div>
        </div>

        <footer class="page-footer">copyright by safenest © 2025-2026</footer>
      </section>

      <!-- UPLOAD -->
      <section id="page-upload" class="page">
        <div class="card glass-card">
          <div class="card-header">
            <h2 class="page-title"><i class="fa fa-cloud-upload"></i> Upload</h2>
            <div id="uploadUpdateBadge" class="page-update-badge hide">
              <i class="fa fa-rocket"></i>
              <span>Update dalam: <span id="uploadUpdateCountdown">--:--:--</span></span>
            </div>
          </div>
          
          <p class="muted">Upload file. Kamu akan menerima username & password sekali tampil.</p>

          <!-- AREA UPLOAD YANG SUDAH DIPERBAIKI -->
          <div class="upload-area">
            <label class="filebox">
              <input id="fileInput" type="file" class="hidden-file-input" />
              <div class="filebox-inner">
                <div class="filebox-icon">
                  <i class="fa fa-cloud-upload"></i>
                </div>
                <div class="filebox-text">
                  <strong>Upload File</strong>
                  <small>pdf, png, jpg, mp3, mp4, zip, html, dll</small>
                </div>
              </div>
            </label>
            <!-- Tempat untuk menampilkan nama file yang dipilih -->
            <div id="fileNameDisplay" class="file-name-display hide"></div>
          </div>

          <!-- EXPIRE SELECT -->
          <div style="margin-top:16px">
            <label for="expireSelect" class="form-label">Pilih masa expired</label>
            <select id="expireSelect" class="select-expire">
              <option value="never">Tidak expired</option>
              <option value="2h">2 jam</option>
              <option value="1d">1 hari</option>
              <option value="5d">5 hari</option>
              <option value="1m">1 bulan</option>
            </select>
          </div>

          <div class="row" style="margin-top:16px">
            <button id="btnUpload" class="btn primary"><i class="fa fa-upload"></i> Upload & Generate Credentials</button>
          </div>

          <!-- BAGIAN KREDENSIAL YANG DIPERBAIKI -->
          <div id="creds" class="creds-box hide">
            <div class="creds-header">
              <h4><i class="fa fa-key"></i> Kredensial File</h4>
              <small class="muted">Simpan informasi ini dengan aman - password hanya ditampilkan sekali!</small>
            </div>
            
            <div class="creds-grid">
              <div class="cred-item">
                <label><i class="fa fa-user"></i> Username:</label>
                <code id="outUser" class="cred-value">-</code>
              </div>
              <div class="cred-item">
                <label><i class="fa fa-lock"></i> Password:</label>
                <code id="outPass" class="cred-value">-</code>
              </div>
              <div class="cred-item">
                <label><i class="fa fa-clock-o"></i> Expired:</label>
                <code id="outExpire" class="cred-value">-</code>
              </div>
              <div class="cred-item">
                <label><i class="fa fa-link"></i> Link:</label>
                <code id="outLink" class="cred-value">-</code>
              </div>
            </div>
            
            <div class="row" style="margin-top:20px; justify-content: center;">
              <button id="copyCreds" class="btn primary">
                <i class="fa fa-clipboard"></i> Salin Semua Kredensial
              </button>
            </div>

            <div style="margin-top:16px; text-align: center;">
              <small class="muted">
                <i class="fa fa-exclamation-triangle"></i>
                Simpan informasi ini di tempat yang aman. Password tidak dapat dipulihkan!
              </small>
            </div>
          </div>
        </div>

        <footer class="page-footer">copyright by safenest © 2025-2026</footer>
      </section>

      <!-- ABOUT - LAYOUT DIPERBAIKI -->
      <section id="page-about" class="page">
        <div class="card glass-card">
          <div class="card-header">
            <h2 class="page-title"><i class="fa fa-info-circle"></i> About</h2>
            <div id="aboutUpdateBadge" class="page-update-badge hide">
              <i class="fa fa-rocket"></i>
              <span>Update dalam: <span id="aboutUpdateCountdown">--:--:--</span></span>
            </div>
          </div>
          
          <div class="about-content">
            <div class="about-hero">
              <div class="hero-icon">
                <i class="fa fa-shield"></i>
              </div>
              <div class="hero-text">
                <h1>Safenest</h1>
                <p class="hero-subtitle">Setiap unggahan mendapat rumah. Setiap rahasia mendapat penjaga.</p>
              </div>
            </div>

            <div class="about-section">
              <h3>Tentang Safenest</h3>
              <p><strong>Safenest</strong> adalah ruang privat untuk berbagi file dengan cara yang sederhana, tenang, dan aman. Dirancang untuk penggunaan personal, platform ini menjaga setiap unggahan dengan kredensial unik dan akses yang sepenuhnya berada dalam kendali pengguna.</p>
            </div>

            <div class="features-grid">
              <div class="feature-card">
                <div class="feature-icon privacy">
                  <i class="fa fa-eye-slash"></i>
                </div>
                <div class="feature-content">
                  <h4>Privasi Terjamin</h4>
                  <p>Setiap file dilindungi dengan kredensial unik yang hanya diketahui oleh Anda dan penerima file.</p>
                </div>
              </div>
              
              <div class="feature-card">
                <div class="feature-icon expiry">
                  <i class="fa fa-clock-o"></i>
                </div>
                <div class="feature-content">
                  <h4>Kontrol Masa Aktif</h4>
                  <p>Atur waktu kadaluarsa file sesuai kebutuhan, dari 2 jam hingga 1 bulan atau tanpa batas waktu.</p>
                </div>
              </div>
              
              <div class="feature-card">
                <div class="feature-icon speed">
                  <i class="fa fa-bolt"></i>
                </div>
                <div class="feature-content">
                  <h4>Kecepatan Optimal</h4>
                  <p>Upload dan download yang cepat dengan infrastruktur modern dan optimisasi performa.</p>
                </div>
              </div>

              <div class="feature-card">
                <div class="feature-icon security">
                  <i class="fa fa-lock"></i>
                </div>
                <div class="feature-content">
                  <h4>Keamanan Berlapis</h4>
                  <p>File Anda dilindungi dengan enkripsi dan sistem autentikasi yang kuat.</p>
                </div>
              </div>
            </div>

            <div class="about-section vision-mission">
              <div class="vm-grid">
                <div class="vm-card">
                  <div class="vm-icon">
                    <i class="fa fa-eye"></i>
                  </div>
                  <h4>Visi Kami</h4>
                  <p>Mewujudkan ruang berbagi file yang aman, pribadi, dan minimalis tanpa kompromi terhadap keamanan data pengguna.</p>
                </div>
                
                <div class="vm-card">
                  <div class="vm-icon">
                    <i class="fa fa-target"></i>
                  </div>
                  <h4>Misi Kami</h4>
                  <div class="mission-list">
                    <div class="mission-item">
                      <span class="mission-number">1</span>
                      <span>Sistem berbagi file yang cepat dan bebas distraksi</span>
                    </div>
                    <div class="mission-item">
                      <span class="mission-number">2</span>
                      <span>Privasi melalui kredensial unik per-file</span>
                    </div>
                    <div class="mission-item">
                      <span class="mission-number">3</span>
                      <span>Lingkungan yang aman dan nyaman bagi semua pengguna</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="creators-section">
              <h3>Dibuat dengan ❤️ oleh:</h3>
              <div class="creators-grid">
                <a href="https://aryapiw.pages.dev" target="_blank" class="creator-card">
                  <div class="creator-avatar">
                    <span>A</span>
                  </div>
                  <div class="creator-info">
                    <h4>Aryapiw</h4>
                    <p>Full Stack Developer</p>
                    <span class="creator-link">aryapiw.pages.dev</span>
                  </div>
                  <div class="creator-arrow">
                    <i class="fa fa-external-link"></i>
                  </div>
                </a>
                
                <a href="https://dapid.my.id" target="_blank" class="creator-card">
                  <div class="creator-avatar">
                    <span>D</span>
                  </div>
                  <div class="creator-info">
                    <h4>Dapid</h4>
                    <p>System Architect</p>
                    <span class="creator-link">dapid.my.id</span>
                  </div>
                  <div class="creator-arrow">
                    <i class="fa fa-external-link"></i>
                  </div>
                </a>
              </div>
            </div>

            <div class="comments-section">
              <div class="section-header">
                <h3><i class="fa fa-comments"></i> Komentar & Feedback</h3>
                <p class="section-subtitle">Bagikan pendapat Anda tentang Safenest</p>
              </div>

              <div class="comment-form">
                <div class="form-group">
                  <input id="cName" placeholder="Nama Anda (opsional)" />
                </div>
                <div class="form-group">
                  <textarea id="cMsg" placeholder="Tulis komentar atau saran Anda..." rows="4"></textarea>
                </div>
                <div class="form-actions">
                  <button id="cSend" class="btn primary">
                    <i class="fa fa-paper-plane"></i> Kirim Komentar
                  </button>
                </div>
              </div>

              <div id="commentsBox" class="comments-box"></div>
            </div>
          </div>
        </div>

        <footer class="page-footer">
          <div class="footer-content">
            <p>copyright by safenest © 2025-2026</p>
            <div class="footer-links">
              <a href="#privacy">Privacy Policy</a>
              <a href="#terms">Terms of Service</a>
              <a href="#contact">Contact</a>
            </div>
          </div>
        </footer>
      </section>

      <!-- ADMIN dashboard - SIMPLIFIED -->
      <section id="page-admin" class="page">
        <div class="card glass-card">
          <div class="card-header">
            <h2 class="page-title"><i class="fa fa-lock"></i> Admin Dashboard</h2>
            <button id="admin-logout" class="btn ghost small">
              <i class="fa fa-sign-out"></i> Logout
            </button>
          </div>

          <!-- Quick Stats -->
          <div class="simple-stats">
            <div class="stat-item">
              <div class="stat-number" id="stat-uploads">0</div>
              <div class="stat-label">Uploads</div>
            </div>
            <div class="stat-item">
              <div class="stat-number" id="stat-downloads">0</div>
              <div class="stat-label">Downloads</div>
            </div>
            <div class="stat-item">
              <div class="stat-number" id="stat-files">0</div>
              <div class="stat-label">Files Aktif</div>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="quick-actions">
            <h4>Quick Actions</h4>
            <div class="action-buttons">
              <button id="cleanup-files" class="btn primary small">
                <i class="fa fa-trash"></i> Bersihkan Expired
              </button>
              <button id="refresh-files" class="btn ghost small">
                <i class="fa fa-refresh"></i> Refresh
              </button>
              <button id="clear-cache" class="btn ghost small">
                <i class="fa fa-eraser"></i> Clear Cache
              </button>
            </div>
          </div>

          <!-- System Controls -->
          <div class="system-controls">
            <div class="control-group">
              <h4><i class="fa fa-wrench"></i> Maintenance Mode</h4>
              <div class="toggle-row">
                <label class="toggle">
                  <input type="checkbox" id="maintenance-toggle" />
                  <span class="toggle-slider"></span>
                </label>
                <span class="toggle-label">Aktifkan Maintenance</span>
              </div>
              
              <div id="maintenance-settings" class="control-settings">
                <input type="text" id="maintenance-message" placeholder="Pesan maintenance..." class="full-width" />
                <input type="datetime-local" id="maintenance-ends" class="full-width" />
                <button id="save-maintenance-settings" class="btn primary small full-width">
                  <i class="fa fa-save"></i> Simpan Maintenance
                </button>
              </div>
            </div>

            <div class="control-group">
              <h4><i class="fa fa-rocket"></i> Update Countdown</h4>
              <div class="toggle-row">
                <label class="toggle">
                  <input type="checkbox" id="update-toggle" />
                  <span class="toggle-slider"></span>
                </label>
                <span class="toggle-label">Aktifkan Countdown</span>
              </div>
              
              <div id="update-settings" class="control-settings">
                <input type="text" id="update-message" placeholder="Pesan update..." class="full-width" />
                <input type="datetime-local" id="update-ends" class="full-width" />
                <div class="toggle-row">
                  <label class="toggle">
                    <input type="checkbox" id="update-banner-toggle" checked />
                    <span class="toggle-slider"></span>
                  </label>
                  <span class="toggle-label">Tampilkan Banner</span>
                </div>
                <button id="save-update-settings" class="btn primary small full-width">
                  <i class="fa fa-save"></i> Simpan Update
                </button>
                <button id="clear-update" class="btn ghost small full-width">
                  <i class="fa fa-times"></i> Hapus Countdown
                </button>
              </div>
            </div>

            <div class="control-group">
              <h4><i class="fa fa-history"></i> Changelog Settings</h4>
              <div class="control-settings">
                <input type="text" id="app-version" placeholder="Versi (contoh: v2.1.0)" class="full-width" />
                <textarea id="changelog-content" placeholder="Changelog dalam format JSON" rows="6" class="full-width"></textarea>
                <small class="muted">Format: [{"version": "v2.1.0", "date": "2024-01-15", "changes": ["Fitur 1", "Fitur 2"]}]</small>
                <button id="save-changelog-settings" class="btn primary small full-width">
                  <i class="fa fa-save"></i> Simpan Changelog
                </button>
              </div>
            </div>
          </div>

          <!-- File Management -->
          <div class="file-management">
            <div class="files-header">
              <h4><i class="fa fa-files-o"></i> File Management</h4>
              <div class="files-count">Total: <span id="files-count">0</span> file</div>
            </div>
            <div id="files-list" class="simple-files-list">
              <!-- File list will be inserted here -->
            </div>
          </div>

          <div id="admin-message" class="admin-message"></div>
        </div>
      </section>
    </main>

    <!-- Bottom floating navbar -->
    <nav class="bottom-nav glass-nav" role="navigation" aria-label="Main navigation">
      <div class="nav-inner">
        <button class="nav-btn" data-target="page-download" id="nav-download" aria-label="Download">
          <div class="icon-wrap"><i class="fa fa-download"></i></div>
          <div class="label">Download</div>
        </button>

        <button class="nav-btn center" data-target="page-upload" id="nav-upload" aria-label="Upload">
          <div class="circle-plus"><i class="fa fa-plus"></i></div>
          <div class="label">Upload</div>
        </button>

        <button class="nav-btn" data-target="page-about" id="nav-about" aria-label="About">
          <div class="icon-wrap"><i class="fa fa-info-circle"></i></div>
          <div class="label">About</div>
        </button>
      </div>
    </nav>
  </div>

  <!-- Changelog Floating Button & Popup -->
  <div id="changelogButton" class="changelog-floating-btn small">
    <i class="fa fa-history"></i>
  </div>

  <div id="changelogOverlay" class="changelog-overlay hide"></div>

  <div id="changelogPopup" class="changelog-popup hide">
    <div class="changelog-header">
      <h3><i class="fa fa-history"></i> Changelog & Version</h3>
      <button id="changelogClose" class="changelog-close-btn">
        <i class="fa fa-times"></i>
      </button>
    </div>
    
    <div class="version-info">
      <div class="version-badge">
        <i class="fa fa-tag"></i>
        <span id="currentVersion">v2.1.0</span>
      </div>
      <p class="muted">Riwayat pembaruan dan fitur Safenest</p>
    </div>

    <div id="changelogContent" class="changelog-content">
      <!-- Changelog items will be inserted here -->
    </div>
  </div>

  <!-- Enhanced Global Maintenance Overlay -->
  <div id="globalMaintenanceOverlay" class="global-maintenance-overlay hide">
    <div class="maintenance-modal">
      <div class="maintenance-icon">
        <i class="fa fa-wrench"></i>
      </div>
      <div class="maintenance-content">
        <h3>Sedang Maintenance</h3>
        <p id="maintenance-modal-message">Sistem sedang dalam perbaikan untuk pengalaman yang lebih baik.</p>
        <div class="maintenance-countdown">
          <i class="fa fa-clock-o"></i>
          <span>Selesai dalam: <strong id="maintenance-modal-countdown">--:--:--</strong></span>
        </div>
        <button class="btn primary maintenance-ok">
          <i class="fa fa-check"></i> Mengerti
        </button>
      </div>
    </div>
  </div>

  <!-- Global Loader -->
  <div id="globalLoader" class="global-loader">
    <div class="loader-content">
      <div class="loader-spinner"></div>
      <div class="loader-text">Memuat Safenest...</div>
    </div>
  </div>

  <script type="module" src="firebase.js"></script>
  <script type="module" src="app.js"></script>
</body>
</html>